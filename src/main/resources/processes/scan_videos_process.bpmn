<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_08c9yfv" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.41.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.24.0">
  <bpmn:process id="scan_videos_process_id" name="SCAN_VIDEOS_PROCESS" isExecutable="true" camunda:historyTimeToLive="7">
    <bpmn:startEvent id="StartScan" name="Start scan">
      <bpmn:outgoing>Flow_1g7loul</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="FindFilesTask" name="Find Video Files" camunda:delegateExpression="${findVideoFilesDelegate}">
      <bpmn:incoming>Flow_1g7loul</bpmn:incoming>
      <bpmn:outgoing>Flow_188uh9e</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1g7loul" sourceRef="StartScan" targetRef="FindFilesTask" />
    <bpmn:serviceTask id="BuildMediaItemsTask" name="Build Media Items" camunda:delegateExpression="${buildMediaItemsDelegate}">
      <bpmn:incoming>Flow_188uh9e</bpmn:incoming>
      <bpmn:outgoing>Flow_1hort84</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_188uh9e" sourceRef="FindFilesTask" targetRef="BuildMediaItemsTask" />
    <bpmn:serviceTask id="DeleteNotExistingTask" name="Delete Not Existing Media Items" camunda:delegateExpression="${removeOldMediaItemsDelegate}">
      <bpmn:incoming>Flow_1hort84</bpmn:incoming>
      <bpmn:outgoing>Flow_0xfw1dw</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1hort84" sourceRef="BuildMediaItemsTask" targetRef="DeleteNotExistingTask" />
    <bpmn:serviceTask id="BuildShowsTask" name="Build Shows" camunda:delegateExpression="${setUpShowsDelegate}">
      <bpmn:incoming>Flow_0xfw1dw</bpmn:incoming>
      <bpmn:outgoing>Flow_0bc7grk</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0xfw1dw" sourceRef="DeleteNotExistingTask" targetRef="BuildShowsTask" />
    <bpmn:serviceTask id="SetShowStructureTask" name="Set Show Structure" camunda:delegateExpression="${setShowsStructureDelegate}">
      <bpmn:incoming>Flow_0bc7grk</bpmn:incoming>
      <bpmn:outgoing>Flow_1hpp22i</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0bc7grk" sourceRef="BuildShowsTask" targetRef="SetShowStructureTask" />
    <bpmn:serviceTask id="FetchAndSetTMDB_APImetadata" name="Fetch and set TMDB API metadata" camunda:delegateExpression="${SyncShowsWithTmdb}">
      <bpmn:incoming>Flow_1hpp22i</bpmn:incoming>
      <bpmn:outgoing>Flow_1pmt9b9</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1hpp22i" sourceRef="SetShowStructureTask" targetRef="FetchAndSetTMDB_APImetadata" />
    <bpmn:endEvent id="EndScan" name="End scan">
      <bpmn:incoming>Flow_1pmt9b9</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1pmt9b9" sourceRef="FetchAndSetTMDB_APImetadata" targetRef="EndScan" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="scan_videos_process_id">
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartScan">
        <dc:Bounds x="182" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="176" y="145" width="50" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0u1ys6r_di" bpmnElement="FindFilesTask">
        <dc:Bounds x="270" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_15atw67_di" bpmnElement="BuildMediaItemsTask">
        <dc:Bounds x="430" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0onnflq_di" bpmnElement="DeleteNotExistingTask">
        <dc:Bounds x="590" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0s9epxb_di" bpmnElement="BuildShowsTask">
        <dc:Bounds x="750" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_087wjf3_di" bpmnElement="SetShowStructureTask">
        <dc:Bounds x="910" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_02xq0n1_di" bpmnElement="FetchAndSetTMDB_APImetadata">
        <dc:Bounds x="1070" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0po2ffw_di" bpmnElement="EndScan">
        <dc:Bounds x="1232" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1227" y="145" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1g7loul_di" bpmnElement="Flow_1g7loul">
        <di:waypoint x="218" y="120" />
        <di:waypoint x="270" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_188uh9e_di" bpmnElement="Flow_188uh9e">
        <di:waypoint x="370" y="120" />
        <di:waypoint x="430" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1hort84_di" bpmnElement="Flow_1hort84">
        <di:waypoint x="530" y="120" />
        <di:waypoint x="590" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0xfw1dw_di" bpmnElement="Flow_0xfw1dw">
        <di:waypoint x="690" y="120" />
        <di:waypoint x="750" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bc7grk_di" bpmnElement="Flow_0bc7grk">
        <di:waypoint x="850" y="120" />
        <di:waypoint x="910" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1hpp22i_di" bpmnElement="Flow_1hpp22i">
        <di:waypoint x="1010" y="120" />
        <di:waypoint x="1070" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1pmt9b9_di" bpmnElement="Flow_1pmt9b9">
        <di:waypoint x="1170" y="120" />
        <di:waypoint x="1232" y="120" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
